<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layouts/defaultLayout}">
<div layout:fragment="Content">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .form-container {
            max-width: 600px;
            margin: auto;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }
        .form-group textarea {
            resize: vertical;
        }
        .form-group input[type="submit"] {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
        }
        .form-group input[type="submit"]:hover {
            background-color: #45a049;
        }
    </style>
    <div class="form-container" >
        <h1>업체 생성</h1>
        <form action="/submit" method="post">
            <div class="form-group">
                <label for="companyName">업체명</label>
                <input type="text" id="companyName" name="companyName" required maxlength="30">
            </div>

            <div class="form-group">
                <label for="serverIdx">서버 고유번호</label>
                <input type="text" id="serverIdx" name="serverIdx" required maxlength="30">
            </div>

            <div class="form-group">
                <label for="serviceIdx">서비스 고유번호</label>
                <input type="text" id="serviceIdx" name="serviceIdx" required maxlength="30">
            </div>

            <div class="form-group">
                <label for="managers">담당자</label>
                <input type="text" id="managers" name="managers" required maxlength="255">
            </div>

            <div class="form-group">
                <label for="codeType">업체 유형</label>
                <select id="codeType" name="codeType" required>
                    <option value="">선택하세요</option>
                    <option value="1">관공서</option>
                    <option value="2">학교</option>
                    <option value="3">일반 기업</option>
                    <option value="4">자체</option>
                </select>
            </div>

            <div class="form-group">
                <label for="memo">추가사항</label>
                <textarea id="memo" name="memo" rows="4" placeholder="추가사항을 입력하세요."></textarea>
            </div>

            <div class="form-group">
                <label for="registrantId">게시물 등록자 아이디</label>
                <input type="text" id="registrantId" name="registrantId" required maxlength="30">
            </div>

            <div class="form-group">
                <input type="submit" id="sava" value="확인">
            </div>
        </form>
    </div>
</div>
<th:block layout:fragment="script">
    <script th:src="@{/js/user/form.js}"></script>
    <script>
        $(function () {
            $("#sava").on('click', async function (e) {
                e.preventDefault();

                const params = {
                    companyName: $("#companyName").val(),
                    serverIdx: $("#serverIdx").val(),
                    serviceIdx: $("#serviceIdx").val(),
                    managers: $("#managers").val(),
                    codeType: $("#codeType").val(),
                    memo: $("#memo").val(),
                    registrantId: $("#registrantId").val()
                };

                $.ajax({
                    type: "POST",
                    url: "/api/customer/create",
                    data: JSON.stringify(params),
                    contentType: 'application/json; charset=utf-8',
                    success: function (res) {
                        alert(res.message);
                        window.location = '/customer/list';
                    },
                    error: function (error) {
                        alert(error);
                        console.error(error);
                    }
                });
            })
        })
    </script>
</th:block>
</html>
